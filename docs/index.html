<!DOCTYPE html>
<html lang="en">
  <head>
    <title>  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html"> Docs</a> (89% documented)</p>
        <p class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html"> Reference</a>
        <img id="carat" src="img/carat.png" />
          Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Complex.html">Complex</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Complex.html">Complex</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <hr>
<h1 id='overview' class='heading'>Overview</h1>

<p>SwiftRT is an experimental computational framework written in the Swift language. The project is under heavy devopment, so frequent changes should be expected.</p>

<hr>
<h1 id='installation' class='heading'>Installation</h1>

<p>This project requires the use of the Google Swift4 TensorFlow custom toolchain (in place of the standard toolchain), because it leverages the toolchain&rsquo;s integrated auto differentiation functionality.</p>
<h2 id='macos-and-ubuntu-cpu-only-installation' class='heading'>MacOS and Ubuntu CPU Only Installation</h2>

<p>Currently a cpu build is available on MacOS.</p>

<p>1) Install Xcode 12
2) Install the Google <a href="https://github.com/tensorflow/swift/blob/master/Installation.md">Swift4 TensorFlow Xcode 12 Toolchain</a>, and in Xcode select the toolchain in the <code>Preferences</code> pane.</p>

<p>3) Install and run the SwiftRT unit tests to verify the installation:</p>
<pre class="highlight shell"><code><span class="nv">$ </span>git clone https://github.com/ewconnell/swiftrt.git
<span class="nv">$ </span><span class="nb">cd </span>swiftrt
<span class="nv">$ </span>swift <span class="nb">test</span>
</code></pre>

<p>4) To create an Xcode project for debugging</p>
<pre class="highlight shell"><code><span class="nv">$ </span>swift package generate-xcodeproj
</code></pre>
<h2 id='ubuntu-cuda-installation' class='heading'>Ubuntu Cuda Installation</h2>

<p>Currently the Swift Package Manager does not support building <code>.cpp</code> or cuda <code>.cu</code> files, so <strong>CMake</strong> is used. CMake and the SPM are used in combination in order to resolve dependent packages during build.</p>

<p><strong>NOTE:</strong> all unit tests should pass with the CPU only build. The Cuda version is currently under development and there is no claim that the unit tests currently pass. This notice will be removed after they successfully pass.</p>

<p>1) Install the Google <a href="https://github.com/tensorflow/swift/blob/master/Installation.md">Swift4 TensorFlow Xcode 12 Toolchain</a>.</p>

<p>2) Add the following exports to your <code>~/.bashrc</code> file, assuming SwiftRT installation is in the <code>$HOME</code> directory. </p>
<pre class="highlight shell"><code><span class="c"># swiftrt installation location</span>
<span class="nb">export </span><span class="nv">SWIFTRT_HOME</span><span class="o">=</span><span class="nv">$HOME</span>/swiftrt

<span class="c"># add to pkgconfig path location of .pc files so SPM can link to Cuda</span>
<span class="nb">export </span><span class="nv">PKG_CONFIG_PATH</span><span class="o">=</span><span class="nv">$SWIFTRT_HOME</span>/pkgconfig

<span class="c"># add `gyb` utility to path if you will be modifying the SwiftRT codebase</span>
<span class="c"># and changing any .gyb files.</span>
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$SWIFTRT_HOME</span>/gyb:<span class="nv">$PATH</span>

<span class="c"># tells Package.swift to include a dependency and link to cuda</span>
<span class="nb">export </span><span class="nv">SWIFTRT_PLATFORM</span><span class="o">=</span>cuda

<span class="c"># cuda installation location</span>
<span class="nb">export </span><span class="nv">CUDA_ROOT</span><span class="o">=</span>/usr/local/cuda
<span class="nb">export </span><span class="nv">LIBRARY_PATH</span><span class="o">=</span><span class="nv">$CUDA_ROOT</span>/lib64

<span class="c"># to enable LLDB to find Cuda symbols</span>
<span class="nb">export </span><span class="nv">C_INCLUDE_PATH</span><span class="o">=</span><span class="nv">$CUDA_ROOT</span>/include
<span class="nb">export </span><span class="nv">CPLUS_INCLUDE_PATH</span><span class="o">=</span><span class="nv">$CUDA_ROOT</span>/include

</code></pre>

<p>3) CMake 3.5 or higher is required to build. If your current version is less than 3.5, <a href="https://cmake.org/download/">download and install</a> the latest version.</p>

<p>4) The Nvidia nvcc compiler is not yet compatible with clang 10.0 (the version of the S4TF toolchain), so the build uses <code>clang-9</code> for the dependent c++ kernel library.</p>
<pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">sudo </span>apt <span class="nb">install </span>clang-9
</code></pre>

<p>5) To configure cmake for a Debug version</p>
<pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">cd</span> <span class="nv">$SWIFTRT_HOME</span>
<span class="nv">$ </span><span class="nb">mkdir </span>build
<span class="nv">$ </span>cmake <span class="nt">--no-warn-unused-cli</span> <span class="nt">-DCMAKE_EXPORT_COMPILE_COMMANDS</span>:BOOL<span class="o">=</span>TRUE <span class="nt">-DCMAKE_BUILD_TYPE</span>:STRING<span class="o">=</span>Debug <span class="nt">-DCMAKE_C_COMPILER</span>:FILEPATH<span class="o">=</span>/usr/bin/clang-9 <span class="nt">-DCMAKE_CXX_COMPILER</span>:FILEPATH<span class="o">=</span>/usr/bin/clang++-9 <span class="nt">-H</span><span class="nv">$SWIFTRT_HOME</span> <span class="nt">-B</span><span class="nv">$SWIFTRT_HOME</span>/build <span class="nt">-G</span> Ninja
</code></pre>

<p>6) To build</p>
<pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">cd</span> <span class="nv">$SWIFTRT_HOME</span>
<span class="nv">$ </span>cmake <span class="nt">--build</span> ./build <span class="nt">--target</span> SwiftRTTests
</code></pre>

<p>7) To clean</p>
<pre class="highlight shell"><code><span class="nv">$ </span><span class="nb">cd</span> <span class="nv">$SWIFTRT_HOME</span>
<span class="nv">$ </span>cmake <span class="nt">--build</span> ./build <span class="nt">--target</span> clean
<span class="nv">$ </span><span class="nb">rm</span> <span class="nt">-rf</span> .build
</code></pre>

<p>The Swift Package Manager puts all output files into the hidden directory <code>$SWIFTRT_HOME/.build</code></p>

<hr>
<h2 id='setting-up-vscode' class='heading'>Setting up VScode</h2>

<p>VScode is the only IDE so far that seems to be able to build and debug using the custom S4TF toolchain. </p>

<p>1) <a href="https://code.visualstudio.com/download">Install VScode</a>
2) The following extensions seem to work.</p>

<ul>
<li>Swift Language (Martin Kase)</li>
<li>CMake Tools (Microsoft)</li>
<li>CodeLLDB (Vadim Chugunov)

<ul>
<li>It is very important that <code>settings.json</code> contains the following entry to pickup the correct lldb version from the toolchain. Substituting <code>PathToSwiftToolchain</code> with wherever you installed the toolchain.
<code>sh
{
&quot;lldb.library&quot;: &quot;PathToSwiftToolchain/usr/lib/liblldb.so&quot;
}
</code></li>
</ul></li>
<li>SourceKit-LSP (Pavel Vasek)

<ul>
<li>There is a version of the server as part of the toolchain already, so you don&rsquo;t need to build it. Make sure to configure the extension
<code>sh
&quot;sourcekit-lsp.serverPath&quot;: &quot;PathToSwiftToolchain/usr/bin/sourcekit-lsp&quot;
</code></li>
</ul></li>
<li>Subtle Match Brackets (Rafa Mel)</li>
<li>vscode-cudacpp (kriegalex)</li>
</ul>

<p>2) The <code>$SWIFTRT_HOME/Documents/vscode</code> directory contains some helpful starter examples (launch and tasks) to configure the development environment.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2020 <a class="link" href="" target="_blank" rel="external"></a>. All rights reserved. (Last updated: 2020-08-19)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.5</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
